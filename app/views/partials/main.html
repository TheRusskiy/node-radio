<div ng-include="'partials/navbar'"></div>
<div ng-controller="ChatCtrl">

    <h2>Chat</h2>
    <ul>
        <li ng-repeat="msg in messages track by $index">
            <img ng-src="{{ msg.avatar_url }}" width="20" height="20"/>
            {{ msg.readableDate }}
            <strong>{{ msg.nickname }}:</strong> {{ msg.text }}
            <a ng-show="isAdmin() || msg.author_id===currentUser._id"
               href="" ng-click="deleteMessage(msg)" >
                X
            </a>
        </li>
    </ul>
    <form class="form" name="form" ng-submit="submitMessage(form)" novalidate>
        <input type="text" name="currentMessage" ng-model="currentMessage" required/>
        <input type="submit" value="Send"/>
    </form>

    <hr/>
    <h2>Users: {{ users.length }}</h2>
    <div ng-show="isAdmin() || true">
        <ul>
            <li ng-repeat="user in users track by $index">
                <img ng-src="{{ user.avatar_url }}" width="20" height="20"/>
                {{ user.nickname }}
                <span ng-show="user.role=='admin'">
                    (Admin)
                </span>
            </li>
        </ul>
    </div>
</div>

<div class="footer">
  <p>From SSAU with â™¥</p>
</div>
